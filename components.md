# Компонентная архитектура
<!-- Состав и взаимосвязи компонентов системы между собой и внешними системами с указанием протоколов, ключевые технологии, используемые для реализации компонентов.
Диаграмма контейнеров C4 и текстовое описание. 
-->
## Компонентная диаграмма

```plantuml
@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

AddElementTag("microService", $shape=EightSidedShape(), $bgColor="CornflowerBlue", $fontColor="white", $legendText="microservice")
AddElementTag("storage", $shape=RoundedBoxShape(), $bgColor="lightSkyBlue", $fontColor="white")

Person(user, "Работник")
Person(admin, "Начальник")

System_Boundary(logger, "Логгер") {
    Container(computer, "Клиентское приложение", "Python", "Формирование логов, представление статистики")
    Container(server, "Сервис сбора логов", "Python", $tags = "microService")
    ContainerDb(db, "Данные всех клиентов", "MySQL", "Хранение логов, данных пользователей", $tags = "storage")
    Container(analyse, "Сервис обработки логов","Python", $tags = "microService")
    Container(authorize, "Сервис авторизации","Python", $tags = "microService")

}
System_Ext(PM, "Сервиc Process Mining")
Rel(analyse, PM, "Формирование лога для аналитики процессов")

Rel(user, computer, "Использование рабочего компьютера")
Rel(admin, computer, "Просмотр статистики по работе сотрудников")
Rel(computer, authorize, "Работа с пользователями")
Rel(authorize, db, "INSERT/SELECT/UPDATE","SQL")
Rel(computer, server, "Передача логов")

Rel(server,db,"INSERT/SELECT/UPDATE","SQL")
Rel(analyse, db, "INSERT/SELECT/UPDATE","SQL")
Rel_U(analyse, computer, "Предоставление аналитики")

@enduml
```
## Список компонентов
### Сервис авторизации
**API**:
-	Создание нового пользователя
      - входыне параметры: login, Имя, Фамилия, email, обращение (гн/гжа)
      - выходные параметры, отсутствуют
-	Поиск пользователя по логину
     - входные параметры:  login
     - выходные параметры: Имя, Фамилия, email, обращение (гн/гжа)
-	Поиск пользователя по маске имя и фамилии
     - входные параметры: маска фамилии, маска имени
     - выходные параметры: login, Имя, Фамилия, email, обращение (гн/гжа)

### Сервис сбора логов
**API**:
- Сохранение логов с клиентских приложений 
  - Входные параметры: Адреса пользователей
  - Выходыне параметры: отсутствуют
- Создание регулярного сбора логов по новому адресу
  - Входные параметры: Адрес
  - Выходыне параметры: отсутствуют


### Сервис обработки логов
**API**:
- Получение информации о времени работы сотрудника за промежуток времени
  - Входные параметры: 2 даты, логин
  - Выходные параметры: время
- Получение информации о самых используемый приложениях за промежуток времени
  - Входные параметры: 2 даты
  - Выходные параметры: список названий приложений
- Формирование лога для аналитики процессов
  - Входные параметры: поле id процесса, поле этапа процесса, дата, логин
  - Выходные параметры: датасет указанного формата